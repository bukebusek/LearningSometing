$$
\frac{∑i∈P^ri−\frac{|P|×(|P|+1)}{2}}{|P|×|N|}
$$

AUC计算公式

说明： P表示正样本集合，N表示负样本集合，|S|表示集合S的元素个数。ri表示元素i在全集（P+N）中按预测score从小到大排的rank位置（rank位置从1开始，比如：假设|P+N|=10，那么最高分的rank值为10，最低分的rank值为1）。



假设|P+N|有5个元素，按系统预测score从小到大排如下：

|   样本情况    | 样本1 | 样本2 | 样本3 | 样本4 | 样本5 |
| :-----------: | :---: | :---: | :---: | :---: | :---: |
| 正例 or 负例  |   N   |   P   |   N   |   P   |   P   |
| 系统预测score |  0.2  |  0.3  |  0.4  |  0.5  |  0.6  |
|   rank值ri    |   1   |   2   |   3   |   4   |   5   |



对该例，|P|=3,|N|=2，分母为6，分子为(2+4+5)–(0.5×3×4)=5。那么AUC为5÷6=0.8333。